# vo2_83_uf

Исходники внешней обработки ЭДО СБИС второго поколения для платформы 1С8.3.

Скачать готовый релиз можно скачать тут https://sbis.ru/help/integration/1C_set/modul/download
Для желающих принять участие в проекте требуется настроить сборку и разборку исходников:


## Настройка сборки:
### 1. Установить v8unpack из командной строки:
для установки:

    pip install v8unpack
    
для обновления версии
    
    pip install v8unpack --upgrade 
   
Репозиторий проекта v8unpack для желающих принять участие в развитии: git@github.com:saby-integration/v8unpack.git
### 2. Убедиться, что сабмодуль core установлен в ту же ветку и все изменения выкачаны.
### 3. Собрать файл обработки:
Запустить build.cmd в папке репозитория. В результате будет собран .epf файл обработки в папке bin.
### 4. Внести требуемые изменения:
Открыть файл обработки в конфигураторе 1С.
Внести изменения, отладить, сохранить изменения.
### 5. Разобрать файл обработки:
Запустить extract.cmd в папке репозитория. В результате, исправления разберутся по файлам репозитория и/или сабмодуля.
### 6. Закоммитить изменения:
В случае изменения core, сделать отдельный коммит для core.
В случае изменения основного репозитория и core, сделать два отдельных коммита.

## Структура каталога:

    \vo2_83_uf
        \bin
        \core
        \local
        \src
        index.json
        build.cmd
        extract.cmd
        update_index.cmd
	
* bin - папка куда собирается/разбирается обработка
* core - папка сабмодуля с общими файлами для 8.2 и 8.3
* src - папка с уникальными файлами обработки, вспомогательные файлы необходимые для сборки
* local - папка с выносом областей, где содержаться особенности платформы.


## Если при доработке добавлялись новые формы, которые должны попасть в core (для всех версий платформ) то: 
### Запустить extract.cmd в папке репозитория.
Исходники новой формы попадут в папку src
### Запустить update_index.cmd в папке репозитория.
1. В конец index.json добавились новые строки файлов и пути для сборки/разборки. По-умолчанию установлено в core.
2. При необходимости, скорректировать index.json: например, если необходимо, чтобы модуль в форму брался из core, а разметка из src,
то путь к файлу *.obj.1c должен быть заполнен в core, а для файлов *.json должен быть указан пустым.
    
        "{ИмяНовойФормы}.obj.1c": "core\\vo2\\НоваяОбласть\{ИмяНовойФормы}.obj.1c"
        "{ИмяНовойФормы}.form803.json": "",
        "{ИмяНовойФормы}.json": "",

### Повторно запустить extract.cmd.
В результате, разбирается обработка с новыми настройками из index.json, заменяются файлы в src и core.
### Закоммитить изменения
